(function(){if(window.Catalyst===undefined)throw"Catalyst Core not included.";CodeLeaf.Token=function(e,t){this.type=e;this.definition=t};CodeLeaf.Token.toToken=function(e){if(typeOf(e)==="string")return e;if(Object.prototype.toString.call(e)=="[object Array]")return e.map(CodeLeaf.Token.toToken).join("");var t=[" "];if(typeOf(e)!=="object")return!1;var n={type:e.type,definition:CodeLeaf.Token.toToken(e.definition),nodeName:"span",classNames:["token",e.type],attributes:{}};n.type==="comment"&&(n.attributes.spellcheck="true");for(var r in n.attributes){var i=r+'="'+(n.attributes[r]||"")+'"';t.push(i)}return"<"+n.nodeName+' class="'+n.classNames.join(" ")+'"'+t.join(" ")+">"+n.definition+"</"+n.nodeName+">"};CodeLeaf.Tokenizer=new Class({construct:function(e,t){this.id=e;this.definitions=t},tokenize:function(e,t){var n=CodeLeaf.Token,r=[e],i=t&&t.hasOwnProperty("inherit")?t.inherit:null,t=t||this.definitions;if(i!==null){for(var s in i)t[s]=i[s];delete t.inherit}e:for(var s in t){if(!t.hasOwnProperty(s)||!t[s])continue;var o=t[s],u=o.subToken,a=o.matchIndex||0,f=!!o.lookBehind||0;o=o.regex||o;for(var l=0;l<r.length;l++){var c=r[l];if(r.length>e.length)break e;if(c instanceof n)continue;o.lastIndex=0;var h=o.exec(c);if(h){f&&(f=f.match[1].length);var p=h.index-1+f,h=h[0].slice(f),d=p+h.length,v=c.slice(0,p+1),m=c.slice(d+1),g=[l,1];v&&g.push(v);var y=new n(s,u?this.tokenize(h,u):h);g.push(y);m&&g.push(m);Array.prototype.splice.apply(r,g)}}}return r},getOutput:function(e){return CodeLeaf.Token.toToken(this.tokenize(e,this.definitions))}})}).call(window);